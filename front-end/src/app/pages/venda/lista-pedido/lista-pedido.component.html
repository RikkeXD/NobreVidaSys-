<div class="card">
    <p-table #dt [value]="pedidos" [globalFilterFields]="['cliente']" selectionMode="single"
        [(selection)]="empresaIdSelected" dataKey="id" [rowHover]="true" [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10, 25, 50]" [rows]="10" [paginator]="true" stateStorage="session"
        stateKey="statedemo-session" [tableStyle]="{ 'min-width': '60rem' }"
        currentPageReportTemplate="Exibindo {first} a {last} de {totalRecords} pedidos">
        <!-- Cabeçalho da Tabela -->
        <ng-template pTemplate="caption">
            <div class="header-container">
                <div class="search-bar">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                            placeholder="Pesquise pedidos" />
                    </span>
                </div>

                <p-dropdown [options]="empresas" [(ngModel)]="selectedEmpresa" optionLabel="name"
                    placeholder="Selecione a Empresa" [filter]="true" [style]="{ width: '300px' }"
                    emptyFilterMessage="Nenhuma empresa encontrada" (onChange)="empresaSelected($event)"
                    class="empresa-dropdown"></p-dropdown>
            </div>
        </ng-template>

        <!-- Cabeçalho das Colunas -->
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
                <th pSortableColumn="cliente">Cliente <p-sortIcon field="cliente"></p-sortIcon></th>
                <th pSortableColumn="data">Data <p-sortIcon field="data"></p-sortIcon></th>
                <th pSortableColumn="vlr_total">Valor Total <p-sortIcon field="vlr_total"></p-sortIcon></th>
                <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
                <th>Ações</th>
            </tr>
        </ng-template>

        <!-- Corpo da Tabela -->
        <ng-template pTemplate="body" let-pedido>
            <tr [pSelectableRow]="pedido">
                <td>{{ pedido.id }}</td>
                <td>{{ pedido.cliente }}</td>
                <td>{{ pedido.data }}</td>
                <td>{{ pedido.vlr_total | currency: 'BRL' }}</td>
                <td>
                    <span [ngClass]="getStatusClass(pedido.status)">
                        {{ pedido.status }}
                    </span>
                </td>
                <td>
                    <!-- Example single danger button -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-danger dropdown-toggle" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Action
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Separated link</a></li>
                        </ul>
                    </div>
                </td>

            </tr>
        </ng-template>

        <!-- Mensagem de Tabela Vazia -->
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="6" class="empty-message">Nenhum pedido encontrado!</td>
            </tr>
        </ng-template>
    </p-table>
</div>